var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},n=e.parcelRequire9cdf;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},e.parcelRequire9cdf=n),n.register("ilG7L",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.defaultExpandOptions=e.exports.ContextParser=void 0,n("kjyEk");var r=n("7vqNZ"),a=n("60GtF"),o=n("bETwV"),s=n("ecGDU"),i=n("daggI"),l=n("kRKFi");class c{constructor(e){e=e||{},this.documentLoader=e.documentLoader||new o.FetchDocumentLoader,this.documentCache={},this.validateContext=!e.skipValidation,this.expandContentTypeToBase=!!e.expandContentTypeToBase,this.remoteContextsDepthLimit=e.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps=!("redirectSchemaOrgHttps"in e)||!!e.redirectSchemaOrgHttps}static validateLanguage(e,t,r){if("string"!=typeof e)throw new a.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(e)}'`,r);if(!i.Util.REGEX_LANGUAGE_TAG.test(e)){if(t)throw new a.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(e)}'`,r);return!1}return!0}static validateDirection(e,t){if("string"!=typeof e)throw new a.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(e)}'`,a.ERROR_CODES.INVALID_BASE_DIRECTION);if(!i.Util.REGEX_DIRECTION_TAG.test(e)){if(t)throw new a.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(e)}'`,a.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(e){for(const t of Object.keys(e)){const r=e[t];if(r&&"object"==typeof r&&r["@reverse"]&&!r["@id"]){if("string"!=typeof r["@reverse"]||i.Util.isValidKeyword(r["@reverse"]))throw new a.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${r["@reverse"]}'`,a.ERROR_CODES.INVALID_IRI_MAPPING);r["@id"]=r["@reverse"],i.Util.isPotentialKeyword(r["@reverse"])?delete r["@reverse"]:r["@reverse"]=!0}}return e}expandPrefixedTerms(e,t){const r=e.getContextRaw();for(const n of Object.keys(r))if(i.Util.EXPAND_KEYS_BLACKLIST.indexOf(n)<0&&!i.Util.isReservedInternalKeyword(n)){const o=r[n];if(i.Util.isPotentialKeyword(n)&&i.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(n)>=0&&("@type"!==n||"object"==typeof r[n]&&!r[n]["@protected"]&&"@set"!==r[n]["@container"]))throw new a.ErrorCoded(`Keywords can not be aliased to something else.\nTried mapping ${n} to ${JSON.stringify(o)}`,a.ERROR_CODES.KEYWORD_REDEFINITION);if(i.Util.ALIAS_RANGE_BLACKLIST.indexOf(i.Util.getContextValueId(o))>=0)throw new a.ErrorCoded(`Aliasing to certain keywords is not allowed.\nTried mapping ${n} to ${JSON.stringify(o)}`,a.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(o&&i.Util.isPotentialKeyword(i.Util.getContextValueId(o))&&!0===o["@prefix"])throw new a.ErrorCoded(`Tried to use keyword aliases as prefix: '${n}': '${JSON.stringify(o)}'`,a.ERROR_CODES.INVALID_TERM_DEFINITION);for(;i.Util.isPrefixValue(r[n]);){const a=r[n];let o=!1;if("string"==typeof a)r[n]=e.expandTerm(a,!0),o=o||a!==r[n];else{const s=a["@id"],l=a["@type"],c=!("@prefix"in a)||i.Util.isValidIri(n);if("@id"in a)null!=s&&"string"==typeof s&&(r[n]["@id"]=e.expandTerm(s,!0),o=o||s!==r[n]["@id"]);else if(!i.Util.isPotentialKeyword(n)&&c){const t=e.expandTerm(n,!0);t!==n&&(r[n]["@id"]=t,o=!0)}!l||"string"!=typeof l||"@vocab"===l||a["@container"]&&a["@container"]["@type"]||!c||(r[n]["@type"]=e.expandTerm(l,!0),t&&l===r[n]["@type"]&&(r[n]["@type"]=e.expandTerm(l,!1)),o=o||l!==r[n]["@type"])}if(!o)break}}}normalize(e,{processingMode:t,normalizeLanguageTags:r}){if(r||1===t)for(const t of Object.keys(e))if("@language"===t&&"string"==typeof e[t])e[t]=e[t].toLowerCase();else{const r=e[t];r&&"object"==typeof r&&"string"==typeof r["@language"]&&(r["@language"]=r["@language"].toLowerCase())}}containersToHash(e){for(const t of Object.keys(e)){const r=e[t];if(r&&"object"==typeof r)if("string"==typeof r["@container"])r["@container"]={[r["@container"]]:!0};else if(Array.isArray(r["@container"])){const e={};for(const t of r["@container"])e[t]=!0;r["@container"]=e}}}applyScopedProtected(e,{processingMode:t}){if(t&&t>=1.1&&e["@protected"]){for(const t of Object.keys(e))if(!i.Util.isReservedInternalKeyword(t)&&!i.Util.isPotentialKeyword(t)&&!i.Util.isTermProtected(e,t)){const r=e[t];r&&"object"==typeof r?"@protected"in e[t]||(e[t]["@protected"]=!0):e[t]={"@id":r,"@protected":!0}}delete e["@protected"]}}validateKeywordRedefinitions(e,t,r){for(const n of Object.keys(t))if(i.Util.isTermProtected(e,n)){if("string"==typeof t[n]){const a=i.Util.isSimpleTermDefinitionPrefix(t[n],r);t[n]={"@id":t[n]},a&&(t[n]["@prefix"]=!0,e[n]["@prefix"]=!0)}const o=l(e[n]);t[n]["@protected"]=!0;if(o!==l(t[n]))throw new a.ErrorCoded(`Attempted to override the protected keyword ${n} from ${JSON.stringify(i.Util.getContextValueId(e[n]))} to ${JSON.stringify(i.Util.getContextValueId(t[n]))}`,a.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}}validate(e,{processingMode:t}){for(const r of Object.keys(e)){if(i.Util.isReservedInternalKeyword(r))continue;if(""===r)throw new a.ErrorCoded(`The empty term is not allowed, got: '${r}': '${JSON.stringify(e[r])}'`,a.ERROR_CODES.INVALID_TERM_DEFINITION);const n=e[r],o=typeof n;if(i.Util.isPotentialKeyword(r)){switch(r.substr(1)){case"vocab":if(null!==n&&"string"!==o)throw new a.ErrorCoded(`Found an invalid @vocab IRI: ${n}`,a.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(null!==n&&"string"!==o)throw new a.ErrorCoded(`Found an invalid @base IRI: ${e[r]}`,a.ERROR_CODES.INVALID_BASE_IRI);break;case"language":null!==n&&c.validateLanguage(n,!0,a.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(null!==n&&"number"!==o)throw new a.ErrorCoded(`Found an invalid @version number: ${n}`,a.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":null!==n&&c.validateDirection(n,!0);break;case"propagate":if(1===t)throw new a.ErrorCoded(`Found an illegal @propagate keyword: ${n}`,a.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(null!==n&&"boolean"!==o)throw new a.ErrorCoded(`Found an invalid @propagate value: ${n}`,a.ERROR_CODES.INVALID_PROPAGATE_VALUE)}if(i.Util.isValidKeyword(r)&&i.Util.isValidKeyword(i.Util.getContextValueId(n)))throw new a.ErrorCoded(`Illegal keyword alias in term value, found: '${r}': '${i.Util.getContextValueId(n)}'`,a.ERROR_CODES.KEYWORD_REDEFINITION)}else if(null!==n)switch(o){case"string":if(i.Util.getPrefix(n,e)===r)throw new a.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${r}': '${JSON.stringify(n)}'`,a.ERROR_CODES.CYCLIC_IRI_MAPPING);if(i.Util.isValidIriWeak(r)){if("@type"===n)throw new a.ErrorCoded(`IRIs can not be mapped to @type, found: '${r}': '${n}'`,a.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.isValidIri(n)&&n!==new s.JsonLdContextNormalized(e).expandTerm(r))throw new a.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${r}': '${n}'`,a.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!(i.Util.isCompactIri(r)||"@id"in n||("@id"===n["@type"]?e["@base"]:e["@vocab"])))throw new a.ErrorCoded(`Missing @id in context entry: '${r}': '${JSON.stringify(n)}'`,a.ERROR_CODES.INVALID_IRI_MAPPING);for(const l of Object.keys(n)){const u=n[l];if(u)switch(l){case"@id":if(i.Util.isValidKeyword(u)&&"@type"!==u&&"@id"!==u&&"@graph"!==u)throw new a.ErrorCoded(`Illegal keyword alias in term value, found: '${r}': '${JSON.stringify(n)}'`,a.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.isValidIriWeak(r)){if("@type"===u)throw new a.ErrorCoded(`IRIs can not be mapped to @type, found: '${r}': '${JSON.stringify(n)}'`,a.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.isValidIri(u)&&u!==new s.JsonLdContextNormalized(e).expandTerm(r))throw new a.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${r}': '${JSON.stringify(n)}'`,a.ERROR_CODES.INVALID_IRI_MAPPING)}if("string"!=typeof u)throw new a.ErrorCoded(`Detected non-string @id in context entry: '${r}': '${JSON.stringify(n)}'`,a.ERROR_CODES.INVALID_IRI_MAPPING);if(i.Util.getPrefix(u,e)===r)throw new a.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${r}': '${JSON.stringify(n)}'`,a.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if("@type"===n["@container"]&&"@id"!==u&&"@vocab"!==u)throw new a.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${r}': '${u}'`,a.ERROR_CODES.INVALID_TYPE_MAPPING);if("string"!=typeof u)throw new a.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(o)}'`,a.ERROR_CODES.INVALID_TYPE_MAPPING);if(!("@id"===u||"@vocab"===u||1!==t&&"@json"===u||1!==t&&"@none"===u||"_"!==u[0]&&i.Util.isValidIri(u)))throw new a.ErrorCoded(`A context @type must be an absolute IRI, found: '${r}': '${u}'`,a.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if("string"==typeof u&&n["@id"]&&n["@id"]!==u)throw new a.ErrorCoded(`Found non-matching @id and @reverse term values in '${r}':'${u}' and '${n["@id"]}'`,a.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in n)throw new a.ErrorCoded(`@nest is not allowed in the reverse property '${r}'`,a.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(1===t&&(Object.keys(u).length>1||i.Util.CONTAINERS_1_0.indexOf(Object.keys(u)[0])<0))throw new a.ErrorCoded(`Invalid term @container for '${r}' ('${Object.keys(u)}') in 1.0, must be only one of ${i.Util.CONTAINERS_1_0.join(", ")}`,a.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const e of Object.keys(u)){if("@list"===e&&n["@reverse"])throw new a.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${r}'`,a.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(i.Util.CONTAINERS.indexOf(e)<0)throw new a.ErrorCoded(`Invalid term @container for '${r}' ('${e}'), must be one of ${i.Util.CONTAINERS.join(", ")}`,a.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":c.validateLanguage(u,!0,a.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":c.validateDirection(u,!0);break;case"@prefix":if(null!==u&&"boolean"!=typeof u)throw new a.ErrorCoded(`Found an invalid term @prefix boolean in: '${r}': '${JSON.stringify(n)}'`,a.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in n)&&!i.Util.isValidIri(r))throw new a.ErrorCoded(`Invalid @prefix definition for '${r}' ('${JSON.stringify(n)}'`,a.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(1===t||!n["@container"]||!n["@container"]["@index"])throw new a.ErrorCoded(`Attempt to add illegal key to value object: '${r}': '${JSON.stringify(n)}'`,a.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(i.Util.isPotentialKeyword(u)&&"@nest"!==u)throw new a.ErrorCoded(`Found an invalid term @nest value in: '${r}': '${JSON.stringify(n)}'`,a.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new a.ErrorCoded(`Found an invalid term value: '${r}': '${n}'`,a.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(e,t,n){return"string"==typeof e||(n&&!("@base"in e)&&t.parentContext&&"object"==typeof t.parentContext&&"@base"in t.parentContext&&(e["@base"]=t.parentContext["@base"],t.parentContext["@__baseDocument"]&&(e["@__baseDocument"]=!0)),t.baseIRI&&!t.external&&("@base"in e?null===e["@base"]||"string"!=typeof e["@base"]||i.Util.isValidIri(e["@base"])||(e["@base"]=(0,r.resolve)(e["@base"],t.parentContext&&t.parentContext["@base"]||t.baseIRI)):(e["@base"]=t.baseIRI,e["@__baseDocument"]=!0))),e}normalizeContextIri(e,t){if(!i.Util.isValidIri(e))try{e=(0,r.resolve)(e,t)}catch(t){throw new Error(`Invalid context IRI: ${e}`)}return this.redirectSchemaOrgHttps&&e.startsWith("http://schema.org")&&(e="https://schema.org/"),e}async parseInnerContexts(e,t){for(const r of Object.keys(e)){const n=e[r];if(n&&"object"==typeof n&&"@context"in n&&null!==n["@context"]&&!t.ignoreScopedContexts){if(this.validateContext)try{const a=Object.assign({},e);a[r]=Object.assign({},a[r]),delete a[r]["@context"],await this.parse(n["@context"],Object.assign(Object.assign({},t),{external:!1,parentContext:a,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(e){throw new a.ErrorCoded(e.message,a.ERROR_CODES.INVALID_SCOPED_CONTEXT)}n["@context"]=(await this.parse(n["@context"],Object.assign(Object.assign({},t),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:e}))).getContextRaw()}}return e}async parse(t,r={}){const{baseIRI:n,parentContext:o,external:l,processingMode:u=c.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:d,ignoreProtection:p,minimalProcessing:f}=r;let h=o;const g=r.remoteContexts||{};if(Object.keys(g).length>=this.remoteContextsDepthLimit)throw new a.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(g),a.ERROR_CODES.CONTEXT_OVERFLOW);if(null==t){if(!p&&h&&i.Util.hasProtectedTerms(h))throw new a.ErrorCoded("Illegal context nullification when terms are protected",a.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new s.JsonLdContextNormalized(this.applyBaseEntry({},r,!1))}if("string"==typeof t){const e=this.normalizeContextIri(t,n),a=this.getOverriddenLoad(e,r);if(a)return new s.JsonLdContextNormalized(a);const o=await this.parse(await this.load(e),Object.assign(Object.assign({},r),{baseIRI:e,external:!0,remoteContexts:Object.assign(Object.assign({},g),{[e]:!0})}));return this.applyBaseEntry(o.getContextRaw(),r,!0),o}if(Array.isArray(t)){const e=[],a=await Promise.all(t.map(((t,a)=>{if("string"==typeof t){const o=this.normalizeContextIri(t,n);e[a]=o;const s=this.getOverriddenLoad(o,r);return s||this.load(o)}return t})));if(f)return new s.JsonLdContextNormalized(a);const o=await a.reduce(((t,n,a)=>t.then((t=>this.parse(n,Object.assign(Object.assign({},r),{baseIRI:e[a]||r.baseIRI,external:!!e[a]||r.external,parentContext:t.getContextRaw(),remoteContexts:e[a]?Object.assign(Object.assign({},g),{[e[a]]:!0}):g}))))),Promise.resolve(new s.JsonLdContextNormalized(h||{})));return this.applyBaseEntry(o.getContextRaw(),r,!0),o}if("object"==typeof t){if("@context"in t)return await this.parse(t["@context"],r);t=JSON.parse(JSON.stringify(t)),h&&!f&&(h=JSON.parse(JSON.stringify(h)));let o={};if(l&&delete t["@base"],this.applyBaseEntry(t,r,!0),this.containersToHash(t),f)return new s.JsonLdContextNormalized(t);let i={};if("@import"in t){if(!(u>=1.1))throw new a.ErrorCoded("Context importing is not supported in JSON-LD 1.0",a.ERROR_CODES.INVALID_CONTEXT_ENTRY);if("string"!=typeof t["@import"])throw new a.ErrorCoded("An @import value must be a string, but got "+typeof t["@import"],a.ERROR_CODES.INVALID_IMPORT_VALUE);i=await this.loadImportContext(this.normalizeContextIri(t["@import"],n)),delete t["@import"]}o=Object.assign(Object.assign(Object.assign(Object.assign({},o),"object"==typeof h?h:{}),i),t);const g=new s.JsonLdContextNormalized(o);return await this.parseInnerContexts(o,r),(o&&o["@version"]||c.DEFAULT_PROCESSING_MODE)>=1.1&&(t["@vocab"]&&"string"==typeof t["@vocab"]||""===t["@vocab"])&&t["@vocab"].indexOf(":")<0&&h&&"@vocab"in h&&(o["@vocab"]=h["@vocab"]+t["@vocab"]),this.idifyReverseTerms(o),this.expandPrefixedTerms(g,this.expandContentTypeToBase),!p&&h&&u>=1.1&&this.validateKeywordRedefinitions(h,o,e.exports.defaultExpandOptions),this.normalize(o,{processingMode:u,normalizeLanguageTags:d}),this.applyScopedProtected(o,{processingMode:u}),this.validateContext&&this.validate(o,{processingMode:u}),g}throw new a.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${t}`,a.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(e){const t=this.documentCache[e];if(t)return"string"==typeof t?t:Array.isArray(t)?t.slice():Object.assign({},t);let r;try{r=await this.documentLoader.load(e)}catch(t){throw new a.ErrorCoded(`Failed to load remote context ${e}: ${t.message}`,a.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in r))throw new a.ErrorCoded(`Missing @context in remote context at ${e}`,a.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[e]=r["@context"]}getOverriddenLoad(e,t){if(e in(t.remoteContexts||{})){if(t.ignoreRemoteScopedContexts)return e;throw new a.ErrorCoded("Detected a cyclic context inclusion of "+e,a.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(e){const t=await this.load(e);if("object"!=typeof t||Array.isArray(t))throw new a.ErrorCoded("An imported context must be a single object: "+e,a.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in t)throw new a.ErrorCoded("An imported context can not import another context: "+e,a.ERROR_CODES.INVALID_CONTEXT_ENTRY);return this.containersToHash(t),t}}e.exports.ContextParser=c,c.DEFAULT_PROCESSING_MODE=1.1,e.exports.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}})),n.register("kjyEk",(function(e,t){})),n.register("7vqNZ",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),function(t){for(var r in t)e.exports.hasOwnProperty(r)||(e.exports[r]=t[r])}(n("4escN"))})),n.register("4escN",(function(e,t){function r(e){const t=[];let r=0;for(;r<e.length;)switch(e[r]){case"/":if("."===e[r+1])if("."===e[r+2]){if(!a(e[r+3])){t.push([]),r++;break}t.pop(),e[r+3]||t.push([]),r+=3}else{if(!a(e[r+2])){t.push([]),r++;break}e[r+2]||t.push([]),r+=2}else t.push([]),r++;break;case"#":case"?":t.length||t.push([]),t[t.length-1].push(e.substr(r)),r=e.length;break;default:t.length||t.push([]),t[t.length-1].push(e[r]),r++}return"/"+t.map((e=>e.join(""))).join("/")}function n(e,t){let n=t+1;t>=0?"/"===e[t+1]&&"/"===e[t+2]&&(n=t+3):"/"===e[0]&&"/"===e[1]&&(n=2);const a=e.indexOf("/",n);if(a<0)return e;return e.substr(0,a)+r(e.substr(a))}function a(e){return!e||"#"===e||"?"===e||"/"===e}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.resolve=function(e,t){const a=(t=t||"").indexOf("#");if(a>0&&(t=t.substr(0,a)),!e.length){if(t.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${t}' for value '${e}'`);return t}if(e.startsWith("?")){const r=t.indexOf("?");return r>0&&(t=t.substr(0,r)),t+e}if(e.startsWith("#"))return t+e;if(!t.length){const t=e.indexOf(":");if(t<0)throw new Error(`Found invalid relative IRI '${e}' for a missing baseIRI`);return n(e,t)}const o=e.indexOf(":");if(o>=0)return n(e,o);const s=t.indexOf(":");if(s<0)throw new Error(`Found invalid baseIRI '${t}' for value '${e}'`);const i=t.substr(0,s+1);if(0===e.indexOf("//"))return i+n(e,o);let l;if(t.indexOf("//",s)===s+1){if(l=t.indexOf("/",s+3),l<0)return t.length>s+3?t+"/"+n(e,o):i+n(e,o)}else if(l=t.indexOf("/",s+1),l<0)return i+n(e,o);if(0===e.indexOf("/"))return t.substr(0,l)+r(e);let c=t.substr(l);const u=c.lastIndexOf("/");return u>=0&&u<c.length-1&&(c=c.substr(0,u+1),"."===e[0]&&"."!==e[1]&&"/"!==e[1]&&e[2]&&(e=e.substr(1))),e=r(e=c+e),t.substr(0,l)+e},e.exports.removeDotSegments=r,e.exports.removeDotSegmentsOfPath=n})),n.register("60GtF",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ERROR_CODES=e.exports.ErrorCoded=void 0;class r extends Error{constructor(e,t){super(e),this.code=t}}var n;e.exports.ErrorCoded=r,(n=e.exports.ERROR_CODES||(e.exports.ERROR_CODES={})).COLLIDING_KEYWORDS="colliding keywords",n.CONFLICTING_INDEXES="conflicting indexes",n.CYCLIC_IRI_MAPPING="cyclic IRI mapping",n.INVALID_ID_VALUE="invalid @id value",n.INVALID_INDEX_VALUE="invalid @index value",n.INVALID_NEST_VALUE="invalid @nest value",n.INVALID_PREFIX_VALUE="invalid @prefix value",n.INVALID_PROPAGATE_VALUE="invalid @propagate value",n.INVALID_REVERSE_VALUE="invalid @reverse value",n.INVALID_IMPORT_VALUE="invalid @import value",n.INVALID_VERSION_VALUE="invalid @version value",n.INVALID_BASE_IRI="invalid base IRI",n.INVALID_CONTAINER_MAPPING="invalid container mapping",n.INVALID_CONTEXT_ENTRY="invalid context entry",n.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",n.INVALID_DEFAULT_LANGUAGE="invalid default language",n.INVALID_INCLUDED_VALUE="invalid @included value",n.INVALID_IRI_MAPPING="invalid IRI mapping",n.INVALID_JSON_LITERAL="invalid JSON literal",n.INVALID_KEYWORD_ALIAS="invalid keyword alias",n.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",n.INVALID_LANGUAGE_MAPPING="invalid language mapping",n.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",n.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",n.INVALID_LOCAL_CONTEXT="invalid local context",n.INVALID_REMOTE_CONTEXT="invalid remote context",n.INVALID_REVERSE_PROPERTY="invalid reverse property",n.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",n.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",n.INVALID_SCOPED_CONTEXT="invalid scoped context",n.INVALID_SCRIPT_ELEMENT="invalid script element",n.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",n.INVALID_TERM_DEFINITION="invalid term definition",n.INVALID_TYPE_MAPPING="invalid type mapping",n.INVALID_TYPE_VALUE="invalid type value",n.INVALID_TYPED_VALUE="invalid typed value",n.INVALID_VALUE_OBJECT="invalid value object",n.INVALID_VALUE_OBJECT_VALUE="invalid value object value",n.INVALID_VOCAB_MAPPING="invalid vocab mapping",n.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",n.KEYWORD_REDEFINITION="keyword redefinition",n.LOADING_DOCUMENT_FAILED="loading document failed",n.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",n.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",n.PROCESSING_MODE_CONFLICT="processing mode conflict",n.PROTECTED_TERM_REDEFINITION="protected term redefinition",n.CONTEXT_OVERFLOW="context overflow",n.INVALID_BASE_DIRECTION="invalid base direction",n.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",n.INVALID_STREAMING_KEY_ORDER="invalid streaming key order"})),n.register("bETwV",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FetchDocumentLoader=void 0,n("kjyEk");var r=n("60GtF"),a=n("ewyr8"),o=n("7vqNZ");e.exports.FetchDocumentLoader=class{constructor(e){this.fetcher=e}async load(e){const t=await(this.fetcher||fetch)(e,{headers:new Headers({accept:"application/ld+json"})});if(t.ok&&t.headers){let n=t.headers.get("Content-Type");if(n){const e=n.indexOf(";");e>0&&(n=n.substr(0,e))}if("application/ld+json"===n)return await t.json();if(t.headers.has("Link")){let r;if(t.headers.forEach(((t,n)=>{if("link"===n){const n=(0,a.parse)(t);for(const t of n.get("type","application/ld+json"))if("alternate"===t.rel){if(r)throw new Error("Multiple JSON-LD alternate links were found on "+e);r=(0,o.resolve)(t.uri,e)}}})),r)return this.load(r)}throw new r.ErrorCoded(`Unsupported JSON-LD media type ${n}`,r.ERROR_CODES.LOADING_DOCUMENT_FAILED)}throw new Error(t.statusText||`Status code: ${t.status}`)}}})),n.register("ewyr8",(function(e,t){var r=n("6ZWSX").Buffer,a=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,s=/\s|\uFEFF|\xA0/,i=/\r?\n[\x20\x09]+/g,l=/[;,"]/,c=/[;,"]|\s/,u=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,d=1,p=2,f=4;function h(e){return e.replace(o,"")}function g(e){return s.test(e)}function y(e,t){for(;g(e[t]);)t++;return t}function w(e){return c.test(e)||!u.test(e)}class E{constructor(e){this.refs=[],e&&this.parse(e)}rel(e){for(var t=[],r=e.toLowerCase(),n=0;n<this.refs.length;n++)this.refs[n].rel.toLowerCase()===r&&t.push(this.refs[n]);return t}get(e,t){e=e.toLowerCase();for(var r=[],n=0;n<this.refs.length;n++)this.refs[n][e]===t&&r.push(this.refs[n]);return r}set(e){return this.refs.push(e),this}has(e,t){e=e.toLowerCase();for(var r=0;r<this.refs.length;r++)if(this.refs[r][e]===t)return!0;return!1}parse(e,t){e=h(e=(t=t||0)?e.slice(t):e).replace(i,"");for(var r=d,n=e.length,a=(t=0,null);t<n;)if(r===d){if(g(e[t])){t++;continue}if("<"!==e[t])throw new Error('Unexpected character "'+e[t]+'" at offset '+t);if(null!=a&&(null!=a.rel?this.refs.push(...E.expandRelations(a)):this.refs.push(a)),-1===(c=e.indexOf(">",t)))throw new Error("Expected end of URI delimiter at offset "+t);a={uri:e.slice(t+1,c)},t=c,r=p,t++}else if(r===p){if(g(e[t])){t++;continue}if(";"===e[t])r=f,t++;else{if(","!==e[t])throw new Error('Unexpected character "'+e[t]+'" at offset '+t);r=d,t++}}else{if(r!==f)throw new Error('Unknown parser state "'+r+'"');if(";"===e[t]||g(e[t])){t++;continue}if(-1===(c=e.indexOf("=",t)))throw new Error("Expected attribute delimiter at offset "+t);var o=h(e.slice(t,c)).toLowerCase(),s="";if('"'===e[t=y(e,t=c+1)])for(t++;t<n;){if('"'===e[t]){t++;break}"\\"===e[t]&&t++,s+=e[t],t++}else{for(var c=t+1;!l.test(e[c])&&c<n;)c++;s=e.slice(t,c),t=c}switch(a[o]&&E.isSingleOccurenceAttr(o)||("*"===o[o.length-1]?a[o]=E.parseExtendedValue(s):(s="type"===o?s.toLowerCase():s,null!=a[o]?Array.isArray(a[o])?a[o].push(s):a[o]=[a[o],s]:a[o]=s)),e[t]){case",":r=d;break;case";":r=f}t++}return null!=a&&(null!=a.rel?this.refs.push(...E.expandRelations(a)):this.refs.push(a)),a=null,this}toString(){for(var e=[],t="",r=null,n=0;n<this.refs.length;n++)r=this.refs[n],t=Object.keys(this.refs[n]).reduce((function(e,t){return"uri"===t?e:e+"; "+E.formatAttribute(t,r[t])}),"<"+r.uri+">"),e.push(t);return e.join(", ")}}E.isCompatibleEncoding=function(e){return a.test(e)},E.parse=function(e,t){return(new E).parse(e,t)},E.isSingleOccurenceAttr=function(e){return"rel"===e||"type"===e||"media"===e||"title"===e||"title*"===e},E.isTokenAttr=function(e){return"rel"===e||"type"===e||"anchor"===e},E.escapeQuotes=function(e){return e.replace(/"/g,'\\"')},E.expandRelations=function(e){return e.rel.split(" ").map((function(t){var r=Object.assign({},e);return r.rel=t,r}))},E.parseExtendedValue=function(e){var t=/([^']+)?(?:'([^']*)')?(.+)/.exec(e);return{language:t[2].toLowerCase(),encoding:E.isCompatibleEncoding(t[1])?null:t[1].toLowerCase(),value:E.isCompatibleEncoding(t[1])?decodeURIComponent(t[3]):t[3]}},E.formatExtendedAttribute=function(e,t){var n=(t.encoding||"utf-8").toUpperCase();return e+"="+n+"'"+(t.language||"en")+"'"+(r.isBuffer(t.value)&&E.isCompatibleEncoding(n)?t.value.toString(n):r.isBuffer(t.value)?t.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):encodeURIComponent(t.value))},E.formatAttribute=function(e,t){return Array.isArray(t)?t.map((t=>E.formatAttribute(e,t))).join("; "):"*"===e[e.length-1]||"string"!=typeof t?E.formatExtendedAttribute(e,t):(E.isTokenAttr(e)?t=w(t)?'"'+E.escapeQuotes(t)+'"':E.escapeQuotes(t):w(t)&&(t='"'+(t=(t=encodeURIComponent(t)).replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"))+'"'),e+"="+t)},e.exports=E})),n.register("6ZWSX",(function(e,t){})),n.register("ecGDU",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.JsonLdContextNormalized=void 0;var r=n("7vqNZ"),a=n("ilG7L"),o=n("60GtF"),s=n("daggI");e.exports.JsonLdContextNormalized=class{constructor(e){this.contextRaw=e}getContextRaw(){return this.contextRaw}expandTerm(e,t,n=a.defaultExpandOptions){const i=this.contextRaw[e];if(null===i||i&&null===i["@id"])return null;let l=!0;if(i&&t){const t=s.Util.getContextValueId(i);if(t&&t!==e){if("string"==typeof t&&(s.Util.isValidIri(t)||s.Util.isValidKeyword(t)))return t;s.Util.isPotentialKeyword(t)||(l=!1)}}const c=s.Util.getPrefix(e,this.contextRaw),u=this.contextRaw["@vocab"],d=(!!u||""===u)&&u.indexOf(":")<0,p=this.contextRaw["@base"],f=s.Util.isPotentialKeyword(e);if(c){const t=this.contextRaw[c],r=s.Util.getContextValueId(t);if(r){if("string"!=typeof t&&n.allowPrefixForcing){if("_"!==r[0]&&!f&&!t["@prefix"]&&!(e in this.contextRaw))return e}else if(!s.Util.isSimpleTermDefinitionPrefix(r,n))return e;return r+e.substr(c.length+1)}}else{if(t&&(u||""===u||n.allowVocabRelativeToBase&&p&&d)&&!f&&!s.Util.isCompactIri(e)){if(d){if(n.allowVocabRelativeToBase)return(u||p?(0,r.resolve)(u,p):"")+e;throw new o.ErrorCoded(`Relative vocab expansion for term '${e}' with vocab '${u}' is not allowed.`,o.ERROR_CODES.INVALID_VOCAB_MAPPING)}return u+e}if(!t&&p&&!f&&!s.Util.isCompactIri(e))return(0,r.resolve)(e,p)}if(l)return e;throw new o.ErrorCoded(`Invalid IRI mapping found for context entry '${e}': '${JSON.stringify(i)}'`,o.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(e,t){if(t&&this.contextRaw["@vocab"]&&e.startsWith(this.contextRaw["@vocab"]))return e.substr(this.contextRaw["@vocab"].length);if(!t&&this.contextRaw["@base"]&&e.startsWith(this.contextRaw["@base"]))return e.substr(this.contextRaw["@base"].length);const r={prefix:"",suffix:e};for(const n in this.contextRaw){const a=this.contextRaw[n];if(a&&!s.Util.isPotentialKeyword(n)){const o=s.Util.getContextValueId(a);if(e.startsWith(o)){const a=e.substr(o.length);if(a)a.length<r.suffix.length&&(r.prefix=n,r.suffix=a);else if(t)return n}}}return r.prefix?r.prefix+":"+r.suffix:e}}})),n.register("daggI",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Util=void 0;class r{static isCompactIri(e){return e.indexOf(":")>0&&!(e&&"#"===e[0])}static getPrefix(e,t){if(e&&"#"===e[0])return null;const r=e.indexOf(":");if(r>=0){if(e.length>r+1&&"/"===e.charAt(r+1)&&"/"===e.charAt(r+2))return null;const n=e.substr(0,r);if("_"===n)return null;if(t[n])return n}return null}static getContextValueId(e){if(null===e||"string"==typeof e)return e;const t=e["@id"];return t||null}static isSimpleTermDefinitionPrefix(e,t){return!r.isPotentialKeyword(e)&&("_"===e[0]||t.allowPrefixNonGenDelims||r.isPrefixIriEndingWithGenDelim(e))}static isPotentialKeyword(e){return"string"==typeof e&&r.KEYWORD_REGEX.test(e)}static isPrefixIriEndingWithGenDelim(e){return r.ENDS_WITH_GEN_DELIM.test(e)}static isPrefixValue(e){return e&&("string"==typeof e||e&&"object"==typeof e)}static isValidIri(e){return Boolean(e&&r.IRI_REGEX.test(e))}static isValidIriWeak(e){return!!e&&":"!==e[0]&&r.IRI_REGEX_WEAK.test(e)}static isValidKeyword(e){return r.VALID_KEYWORDS[e]}static isTermProtected(e,t){const r=e[t];return!("string"==typeof r)&&r&&r["@protected"]}static hasProtectedTerms(e){for(const t of Object.keys(e))if(r.isTermProtected(e,t))return!0;return!1}static isReservedInternalKeyword(e){return e.startsWith("@__")}}e.exports.Util=r,r.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,r.IRI_REGEX_WEAK=/(?::[^:])|\//,r.KEYWORD_REGEX=/^@[a-z]+$/i,r.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,r.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,r.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,r.VALID_KEYWORDS={"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},r.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],r.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],r.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],r.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],r.CONTAINERS_1_0=["@list","@set","@index"]})),n.register("kRKFi",(function(e,t){e.exports=function e(t){return null===t||"object"!=typeof t||null!=t.toJSON?JSON.stringify(t):Array.isArray(t)?"["+t.reduce(((t,r,n)=>t+(0===n?"":",")+e(void 0===r||"symbol"==typeof r?null:r)),"")+"]":"{"+Object.keys(t).sort().reduce(((r,n,a)=>{if(void 0===t[n]||"symbol"==typeof t[n])return r;return r+(0===r.length?"":",")+e(n)+":"+e(t[n])}),"")+"}"}})),n.register("8EISD",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0})})),n.register("4uhna",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0})}));class a extends Map{set(e,t){return super.set(e,t),t}}class o extends WeakMap{set(e,t){return super.set(e,t),t}}
/*! (c) Andrea Giammarchi - ISC */const s=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i,i=/<([a-z]+[a-z0-9:._-]*)([^>]*?)(\/?)>/g,l=/([^\s\\>"'=]+)\s*=\s*(['"]?)\x01/g,c=/[\x01\x02]/g;var u=(e,t,r)=>{let n=0;return e.join("").trim().replace(i,((e,t,n,a)=>{let o=t+n.replace(l,"=$2$1").trimEnd();return a.length&&(o+=r||s.test(t)?" /":"></"+t),"<"+o+">"})).replace(c,(e=>""===e?"\x3c!--"+t+n+++"--\x3e":t+n++))};const d=(e,t)=>111===e.nodeType?1/t<0?t?(({firstChild:e,lastChild:t})=>{const r=document.createRange();return r.setStartAfter(e),r.setEndAfter(t),r.deleteContents(),e})(e):e.lastChild:t?e.valueOf():e.firstChild:e,p=e=>{const{firstChild:t,lastChild:r}=e;if(t===r)return r||e;const{childNodes:n}=e,a=[...n];return{ELEMENT_NODE:1,nodeType:111,firstChild:t,lastChild:r,valueOf:()=>(n.length!==a.length&&e.append(...a),e)}},{isArray:f}=Array,{indexOf:h,slice:g}=[];let y=!1;class w{constructor(e,t){y=!0,this._=(...r)=>e(...r,t)}}const E=(e,t)=>new w(e,t),I=e=>t=>{for(const r in t){const n="role"===r?r:`aria-${r}`,a=t[r];null==a?e.removeAttribute(n):e.setAttribute(n,a)}},m=(e,t)=>{let r,n=!0;const a=document.createAttributeNS(null,t);return o=>{if(r!==o)if(r=o,null==r)n||(e.removeAttributeNode(a),n=!0);else{const r=y&&o instanceof w?o._(e,t):o;null==r?(n||e.removeAttributeNode(a),n=!0):(a.value=r,n&&(e.setAttributeNodeNS(a),n=!1))}}},v=(e,t,r)=>n=>{r!==!!n&&((r=!!n)?e.setAttribute(t,""):e.removeAttribute(t))},x=(e,t)=>{let r,n,a=t.slice(2);return!(t in e)&&(n=t.toLowerCase())in e&&(a=n.slice(2)),t=>{const n=f(t)?t:[t,!1];r!==n[0]&&(r&&e.removeEventListener(a,r,n[1]),(r=n[0])&&e.addEventListener(a,r,n[1]))}},_=e=>{let t;return r=>{t!==r&&(t=r,"function"==typeof r?r(e):r.current=e)}},b=(e,t)=>"dataset"===t?(({dataset:e})=>t=>{for(const r in t){const n=t[r];null==n?delete e[r]:e[r]=n}})(e):r=>{e[t]=r},R=e=>{let t;return r=>{t!=r&&(t=r,e.textContent=null==r?"":r)}};var O=(e,t,r,n,a)=>{const o=r.length;let s=t.length,i=o,l=0,c=0,u=null;for(;l<s||c<i;)if(s===l){const t=i<o?c?n(r[c-1],-0).nextSibling:n(r[i-c],0):a;for(;c<i;)e.insertBefore(n(r[c++],1),t)}else if(i===c)for(;l<s;)u&&u.has(t[l])||e.removeChild(n(t[l],-1)),l++;else if(t[l]===r[c])l++,c++;else if(t[s-1]===r[i-1])s--,i--;else if(t[l]===r[i-1]&&r[c]===t[s-1]){const a=n(t[--s],-1).nextSibling;e.insertBefore(n(r[c++],1),n(t[l++],-1).nextSibling),e.insertBefore(n(r[--i],1),a),t[s]=r[i]}else{if(!u){u=new Map;let e=c;for(;e<i;)u.set(r[e],e++)}if(u.has(t[l])){const a=u.get(t[l]);if(c<a&&a<i){let o=l,d=1;for(;++o<s&&o<i&&u.get(t[o])===a+d;)d++;if(d>a-c){const o=n(t[l],0);for(;c<a;)e.insertBefore(n(r[c++],1),o)}else e.replaceChild(n(r[c++],1),n(t[l++],-1))}else l++}else e.removeChild(n(t[l++],-1))}return r};const{isArray:N,prototype:C}=Array,{indexOf:A}=C,{createDocumentFragment:T,createElement:D,createElementNS:L,createTextNode:S,createTreeWalker:P,importNode:$}=new Proxy(document,{get:(e,t)=>e[t].bind(e)});let j;const V=(e,t)=>t?(e=>{j||(j=L("http://www.w3.org/2000/svg","svg")),j.innerHTML=e;const t=T();return t.append(...j.childNodes),t})(e):(e=>{const t=D("template");return t.innerHTML=e,t.content})(e),U=({childNodes:e},t)=>e[t],k=(e,t,r)=>O(e.parentNode,t,r,d,e),M=(e,t)=>{switch(t[0]){case"?":return v(e,t.slice(1),!1);case".":return b(e,t.slice(1));case"@":return x(e,"on"+t.slice(1));case"o":if("n"===t[1])return x(e,t)}switch(t){case"ref":return _(e);case"aria":return I(e)}return m(e,t)};function G(e){const{type:t,path:r}=e,n=r.reduceRight(U,this);return"node"===t?(e=>{let t,r,n=[];const a=o=>{switch(typeof o){case"string":case"number":case"boolean":t!==o&&(t=o,r||(r=S("")),r.data=o,n=k(e,n,[r]));break;case"object":case"undefined":if(null==o){t!=o&&(t=o,n=k(e,n,[]));break}if(N(o)){t=o,0===o.length?n=k(e,n,[]):"object"==typeof o[0]?n=k(e,n,o):a(String(o));break}t!==o&&"ELEMENT_NODE"in o&&(t=o,n=k(e,n,11===o.nodeType?[...o.childNodes]:[o]));break;case"function":a(o(e))}};return a})(n):"attr"===t?M(n,e.name):R(n)}const F=e=>{const t=[];let{parentNode:r}=e;for(;r;)t.push(A.call(r.childNodes,e)),e=r,({parentNode:r}=e);return t},q=new o,K=/^(?:textarea|script|style|title|plaintext|xmp)$/,J=(e,t)=>{const r="svg"===e,n=u(t,"isµ",r),a=V(n,r),o=P(a,129),s=[],i=t.length-1;let l=0,c=`isµ${l}`;for(;l<i;){const e=o.nextNode();if(!e)throw`bad template: ${n}`;if(8===e.nodeType)e.data===c&&(s.push({type:"node",path:F(e)}),c="isµ"+ ++l);else{for(;e.hasAttribute(c);)s.push({type:"attr",path:F(e),name:e.getAttribute(c)}),e.removeAttribute(c),c="isµ"+ ++l;K.test(e.localName)&&e.textContent.trim()===`\x3c!--${c}--\x3e`&&(e.textContent="",s.push({type:"text",path:F(e)}),c="isµ"+ ++l)}}return{content:a,nodes:s}},B=(e,t)=>{const{content:r,nodes:n}=q.get(t)||q.set(t,J(e,t)),a=$(r,!0);return{content:a,updates:n.map(G,a)}},W=(e,{type:t,template:r,values:n})=>{const a=z(e,n);let{entry:o}=e;o&&o.template===r&&o.type===t||(e.entry=o=((e,t)=>{const{content:r,updates:n}=B(e,t);return{type:e,template:t,content:r,updates:n,wire:null}})(t,r));const{content:s,updates:i,wire:l}=o;for(let e=0;e<a;e++)i[e](n[e]);return l||(o.wire=p(s))},z=({stack:e},t)=>{const{length:r}=t;for(let n=0;n<r;n++){const r=t[n];r instanceof X?t[n]=W(e[n]||(e[n]={stack:[],entry:null,wire:null}),r):N(r)?z(e[n]||(e[n]={stack:[],entry:null,wire:null}),r):e[n]=null}return r<e.length&&e.splice(r),r};class X{constructor(e,t,r){this.type=e,this.template=t,this.values=r}}const Y=e=>{const t=new o;return Object.assign(((t,...r)=>new X(e,t,r)),{for(r,n){const o=t.get(r)||t.set(r,new a);return o.get(n)||o.set(n,(s={stack:[],entry:null,wire:null},(t,...r)=>W(s,{type:e,template:t,values:r})));var s},node:(t,...r)=>W({stack:[],entry:null,wire:null},new X(e,t,r)).valueOf()})},H=new o,Q=(e,t)=>{const r="function"==typeof t?t():t,n=H.get(e)||H.set(e,{stack:[],entry:null,wire:null}),a=r instanceof X?W(n,r):r;return a!==n.wire&&(n.wire=a,e.replaceChildren(a.valueOf())),e},Z=Y("html");Y("svg");var ee={},te=ee&&ee.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),re=ee&&ee.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||te(t,e,r)};Object.defineProperty(ee,"__esModule",{value:!0}),re(n("ilG7L"),ee),re(n("60GtF"),ee),re(n("bETwV"),ee),re(n("8EISD"),ee),re(n("4uhna"),ee),re(n("ecGDU"),ee),re(n("daggI"),ee);const ne=new WeakMap,ae=(e,t)=>(ne.set(e,t),e),oe=async e=>{const t=new Map,r=(await Promise.all(e.map((async e=>await e.path)))).filter((e=>!e.resultsCache)).map((e=>e.proxy));for(const e of r){const r=await(await e.subject).value;t.has(r)||t.set(r,[]);t.get(r).push(e)}for(const e of t.values()){const t=(await Promise.all(e.map((e=>e.pathExpression)))).map((e=>e.filter((e=>e.predicate)).map((e=>e.predicate.value)))).map((e=>e.map((e=>e.startsWith("http")?`<${e}>`:e)).join(" / "))).filter(Boolean),r=e[0].parent;if(r)try{r.finalClause=e=>`VALUES ${e} { <${r.subject.value}> }`,await r.proxy.preload(...t);for(const t of e){const e=await((await(t?.predicate))?.value);if(e){const n=r.resultsCache[0].path.propertyCache[e];t.path.resultsCache=n}}}catch(e){console.log(e)}}},se=Object.create(null);class ie{constructor(){let{handlers:e=se,resolvers:t=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._handlers=e,this._resolvers=t}createPath(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;void 0===t&&([t,e]=[e,{}]);const{apply:r,...n}=t,a=r?Object.assign((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(t,a,o)}),n):n,o=new Proxy(a,this);if(a.proxy=o,a.settings=e,!a.extendPath){const t=this;a.extendPath=function r(n){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;return t.createPath(e,{parent:a,extendPath:r,...n})}}return o}get(e,t){const r=this._handlers[t];if(r&&"function"==typeof r.handle)return r.handle(e,e.proxy);for(const r of this._resolvers)if(r.supports(t))return r.resolve(t,e,e.proxy)}}var le,ce={};class ue{constructor(e){this.value=e||"b"+ ++ue.nextId}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value}}ue.prototype.termType="BlankNode",ue.nextId=0,ce=ue;var de={};class pe{equals(e){return!!e&&e.termType===this.termType}}pe.prototype.termType="DefaultGraph",pe.prototype.value="",de=pe;var fe={};fe=function(e){if(!e)return null;if("BlankNode"===e.termType)return this.blankNode(e.value);if("DefaultGraph"===e.termType)return this.defaultGraph();if("Literal"===e.termType)return this.literal(e.value,e.language||this.namedNode(e.datatype.value));if("NamedNode"===e.termType)return this.namedNode(e.value);if("Quad"===e.termType){const t=this.fromTerm(e.subject),r=this.fromTerm(e.predicate),n=this.fromTerm(e.object),a=this.fromTerm(e.graph);return this.quad(t,r,n,a)}if("Variable"===e.termType)return this.variable(e.value);throw new Error(`unknown termType ${e.termType}`)};var he={},ge={};class ye{constructor(e){this.value=e}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value}}ye.prototype.termType="NamedNode",ge=ye;class we{constructor(e,t,r){this.value=e,this.datatype=we.stringDatatype,this.language="",t?(this.language=t,this.datatype=we.langStringDatatype):r&&(this.datatype=r)}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)}}we.prototype.termType="Literal",we.langStringDatatype=new ge("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),we.stringDatatype=new ge("http://www.w3.org/2001/XMLSchema#string"),he=we;var Ee={};class Ie{constructor(e,t,r,n){this.subject=e,this.predicate=t,this.object=r,this.graph=n||new de}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)}}Ie.prototype.termType="Quad",Ie.prototype.value="",Ee=Ie;var me={};class ve{constructor(e){this.value=e}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value}}ve.prototype.termType="Variable",me=ve;const xe={namedNode:function(e){return new ge(e)},blankNode:function(e){return new ce(e)},literal:function(e,t){return"string"==typeof t?-1===t.indexOf(":")?new he(e,t):new he(e,null,xe.namedNode(t)):new he(e,null,t)},variable:function(e){return new me(e)},defaultGraph:function(){return xe.defaultGraphInstance},triple:function(e,t,r){return xe.quad(e,t,r)},quad:function(e,t,r,n){return new Ee(e,t,r,n||xe.defaultGraphInstance)},fromTerm:function(e){return fe.call(xe,e)},fromQuad:function(e){return fe.call(xe,e)},defaultGraphInstance:new de};le=xe;class _e{constructor(){this._context=Promise.resolve({}),this.extendContext(...arguments)}async extendContext(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];await(this._context=this._context.then((e=>{let{contextRaw:r}=e;return(new(0,ee.ContextParser)).parse([r,...t])})))}}const be={};async function Re(e){const t=[];for await(const r of e)t.push(r);return t}function Oe(e){return e[Symbol.asyncIterator]().next().then((e=>e.value))}function Ne(e){return{then:Ce(e)}}function Ce(e){return(t,r)=>e().then(t,r)}function Ae(e){return"function"==typeof e&&(e=function(e){const t=[];let r=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){let e=0;return{async next(){if(e<t.length)return t[e++];if(!r)return{done:!0};const n=t[e++]=r.next();return(await n).done&&(r=null),n}}}}}(e())),{[Symbol.asyncIterator]:()=>e[Symbol.asyncIterator](),get then(){return Ce((()=>Oe(this)))},catch(e){return this.then(null,e)},finally(e){return this.then().finally(e)}}}const Te="http://www.w3.org/2001/XMLSchema#",De=`${Te}boolean`,Le=`${Te}dateTime`,Se=`${Te}decimal`,Pe=`${Te}double`,$e=`${Te}float`,je=`${Te}integer`,Ve=(0,le.namedNode)(De),Ue=(0,le.namedNode)(Le),ke=(0,le.namedNode)(Se),Me=(0,le.namedNode)(Pe),Ge=(0,le.namedNode)(je),Fe=(0,le.literal)("true",Ve),qe=(0,le.literal)("false",Ve),Ke=(0,le.literal)("NaN",Me),Je=(0,le.literal)("INF",Me),Be=(0,le.literal)("-INF",Me),We={NaN:NaN,INF:1/0,"-INF":-1/0};function ze(e){return e&&"function"==typeof e[Symbol.asyncIterator]}function Xe(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date||"function"==typeof e.then||"string"==typeof e.termType||ze(e))}function Ye(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=e.some(Xe);if(r&&!t&&1!==e.length)throw new Error(`Expected only 1 plain object, but got ${e.length} arguments`);return r}function He(e){switch(typeof e){case"string":return(0,le.literal)(e);case"boolean":return e?Fe:qe;case"number":return Number.isInteger(e)?(0,le.literal)(e.toString(),Ge):Number.isFinite(e)?(0,le.literal)(e.toString(),ke):e===1/0?Je:e===-1/0?Be:Ke;default:if(e){if("string"==typeof e.termType)return e;if(e instanceof Date)return(0,le.literal)(e.toISOString(),Ue)}}throw new Error(`Invalid object: ${e}`)}function Qe(e){const{termType:t,value:r}=e;if("Literal"===t){const t=e.datatype.value;if(t.startsWith(Te))switch(t){case De:return"true"===r||"1"===r;case je:return Number.parseInt(r,10);case Se:return Number.parseFloat(r);case Pe:case $e:return r in We?We[r]:Number.parseFloat(r);case Le:return new Date(Date.parse(r))}}return r}class Ze{get _context(){return this._contextProvider._context}async extendContext(){await this._contextProvider.extendContext(...arguments)}constructor(e){this._contextProvider=new _e;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];e instanceof _e?(this._contextProvider=e,this.extendContext(...r)):this.extendContext(e,...r)}supports(e){return"string"==typeof e}resolve(e,t){const r=Ne((()=>this.expandProperty(e))),n=Ne((()=>this._context.then((t=>{let{contextRaw:r}=t;return r[e]&&r[e]["@reverse"]})))),a=this.getResultsCache(t,r,n),o={property:e,predicate:r,resultsCache:a,reverse:n,apply:this.apply};return t.extendPath(o)}apply(e,t,r){if(0===e.length){const{property:e}=t;throw new Error(`Specify at least one term when calling .${e}() on a path`)}return t.values=e.map(He),r}async expandProperty(e){return this.lookupProperty(e.replace(/^([a-z][a-z0-9]*)[_$]/i,"$1:"))}getResultsCache(e,t,r){let{propertyCache:n}=e;return n&&Ne((async()=>(n=!await r&&await n,n&&n[(await t).value])))}}class et extends Ze{async lookupProperty(e){const t=(await this._context).expandTerm(e,!0);if(!ee.Util.isValidIri(t))throw new Error(`The JSON-LD context cannot expand the '${e}' property`);return(0,le.namedNode)(t)}}class tt extends Ze{supports(e){return super.supports(e)&&/((^|[/|])[\^])|(([a-z:>)])[*+?])|([)>*+?]|[a-z]*[:][a-z]*)[|/]([<(^]|[a-z]*[:][a-z]*)|(((^[(<])|([)>]$)))/i.test(e)}async lookupProperty(e){if(e.startsWith("<")&&e.endsWith(">")&&2===e.split("<").length)return{termType:"namedNode",value:e.substring(1).substring(0,e.length-2)};try{return{termType:"path",value:e}}catch(t){throw new Error(`The Complex Path Resolver cannot expand the '${e}' path`)}}}class rt{handle(e,t){let{subject:r}=e;return r?()=>{return e=t.subject,{async next(){if(e!==be){const t=await e;return e=be,{value:t}}return{done:!0}}};var e}:()=>t.results[Symbol.asyncIterator]()}}function nt(e){return{handle:e}}const at="http://www.w3.org/1999/02/22-rdf-syntax-ns#";function ot(){return nt(((e,t)=>async()=>{let e=await t;const r=[];for(;e&&e.value!==`${at}nil`;)r.push(e[`${at}first`]),e=await e[`${at}rest`];return(await Promise.all(r)).filter((e=>void 0!==e))}))}function st(e){return nt(((t,r)=>async()=>{let t,n=[],a=0;for(;t=await r[`${at}_${++a}`];)n.push(t);return n=await Promise.all(n),e?new Set(n):n}))}function it(){return nt(((e,t)=>async()=>{var r;switch(null===(r=await t[`${at}type`])||void 0===r?void 0:r.value){case`${at}List`:return ot().handle(e,t)();case`${at}Bag`:return st(!0).handle(e,t)();case`${at}Alt`:case`${at}Seq`:case`${at}Container`:return st(!1).handle(e,t)();default:return t}}))}class lt{constructor(e){this._isAsync=e.async,this._isFunction=e.function;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this._dataProperties=r}static sync(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new lt({async:!1},...t)}static syncFunction(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new lt({async:!1,function:!0},...t)}static async(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new lt({async:!0},...t)}static asyncFunction(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new lt({async:!0,function:!0},...t)}handle(e){return this._isFunction?()=>this._resolveDataPath(e):this._resolveDataPath(e)}_resolveDataPath(e){return this._isAsync?this._resolveAsyncDataPath(e):this._resolveSyncDataPath(e)}_resolveSyncDataPath(e){for(const t of this._dataProperties)e=e&&e[t];return e}async _resolveAsyncDataPath(e){for(const t of this._dataProperties)e=e&&await e[t];return e}}class ct{constructor(e,t){this._mutationType=e,this._allowZeroArgs=t}handle(e,t){var r=this;return function(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];if(!r._allowZeroArgs&&!a.length)throw new Error("Mutation cannot be invoked without arguments");const s=Ne((()=>r.createMutationExpressions(e,t,a)));return e.extendPath({mutationExpressions:s})}}async createMutationExpressions(e,t,r){if(!Ye(r))return[await this.createMutationExpression(e,t,r)];const n=Object.entries(r[0]),a=await Promise.all(n.map((r=>{let[n,a]=r;return this.createMutationExpression(e,t[n],(o=a,Array.isArray(o)?o:o?[o]:[]));var o})));return[0===a.length?{}:{...a[0],predicateObjects:(o=a.map((e=>e.predicateObjects)),[].concat(...o))}];var o}async createMutationExpression(e,t,r){const n=await t.pathExpression;if(!Array.isArray(n))throw new Error(`${e} has no pathExpression property`);if(n.length<2)throw new Error(`${e} should at least contain a subject and a predicate`);const{predicate:a,reverse:o}=n[n.length-1];if(!a)throw new Error(`Expected predicate in ${e}`);const s=await this.extractObjects(e,t,r);return null!==s&&0===s.length?{}:{mutationType:this._mutationType,conditions:n.slice(0,-1),predicateObjects:[{predicate:a,reverse:o,objects:s}]}}async extractObjects(e,t,r){if(0===r.length)return null;const n=[];for(const e of r)ze(e)?n.push(...await Re(e)):n.push(await e);return n.map(He)}}class ut{async*handle(e,t){const r=await e.resultsCache;if(r){for(const e of r)yield e;return}const{queryEngine:n}=e.settings;if(!n)throw new Error(`${e} has no queryEngine setting`);const a=await t.sparql;if(null==a)throw new Error(`${e} has no sparql property`);if(0!==a.length)for await(const t of n.execute(a))yield this.extractTerm(t,e)}extractTerm(e,t){if(1!==e.size)throw new Error("Only single-variable queries are supported");const r=e.values().next().value;return t.extendPath({subject:r},null)}}class dt{handle(e,t){var r=this;return function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return r.readProperties(t,1===n.length?n[0]:n,!0)}}async readProperties(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ze(t)&&(t=await Re(t)),Array.isArray(t)){const r=t.map((t=>this.readProperties(e,t)));return Promise.all(r)}if(Xe(t)){const r=Object.keys(t);t=r.map((e=>t[e]||e));const n={},a=await this.readProperties(e,t);for(let e=0;e<r.length;e++)n[r[e]]=a[e];return n}const n=e[t];return r?[n]:n}}class pt{async handle(e){const t=[];let r=e;for(;r;)r.mutationExpressions&&t.unshift(...await r.mutationExpressions),r=r.parent;return t}}class ft{async handle(e){const t=[];let r=e;for(;r.parent;)r.predicate&&t.unshift({predicate:await r.predicate,reverse:await r.reverse,sort:r.sort,values:r.values}),r=r.parent;if(!r.subject)throw new Error(`Expected root subject in ${r}`);const n=await r.subject;return t.unshift({subject:n}),t}}class ht{handle(e){const{predicate:t}=e;return t?Promise.resolve(t).then((t=>e.extendPath({subject:t},null))):void 0}}class gt{handle(e){return e.extendPath({distinct:!0,select:"?predicate",finalClause:e=>`${e} ?predicate ?object.`,property:e.property})}}const yt=/(SELECT\s+)(\?\S+)/,wt=/\}[^}]*$/;function Et(e){const{termType:t,value:r}=e;switch(t){case"NamedNode":return r;case"Literal":const{language:n,datatype:a}=e;return`${t}|${n}|${a.value}|${r}`;default:return`${t}|${r}`}}class It{handle(e,t){return Ae(this._handle(e,t))}async*_handle(e,t){const r=await e.settings.parsedContext||{},n=new(0,ee.JsonLdContextNormalized)(r);for await(const e of t.predicates)yield n.compactIri(`${await e}`,!0)}}class mt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ASC";this.order=e}handle(e,t){var r=this;return function(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];if(0===a.length)return t;const[s,...i]=a,{predicate:l}=t[s],c={property:s,predicate:l,sort:r.order},u=e.extendPath(c);return 0===i.length?u:u.sort(...i)}}}const vt=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,xt=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,_t={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class bt{async handle(e,t){const r=await t.mutationExpressions;if(Array.isArray(r)&&r.length)return r.map((e=>this.mutationExpressionToQuery(e))).filter(Boolean).join("\n;\n");const n=await t.pathExpression;if(!Array.isArray(n))throw new Error(`${e} has no pathExpression property`);return this.pathExpressionToQuery(e,t,n)}pathExpressionToQuery(e,t,r){if(r.length<2&&!e.finalClause)throw new Error(`${e} should at least contain a subject and a predicate`);let n="?subject",a=[],o=[];r.length>1&&(n=this.createVar(e.property),({queryVar:n,sorts:a,clauses:o}=this.expressionToTriplePatterns(r,n))),e.finalClause&&o.push(e.finalClause(n));const s=`SELECT ${e.distinct?"DISTINCT ":""}${e.select?e.select:n}`,i=` WHERE {\n  ${o.join("\n  ")}\n}`,l=a.map((e=>{let{order:t,variable:r}=e;return`${t}(${r})`}));return`${s}${i}${0===l.length?"":`\nORDER BY ${l.join(" ")}`}`}mutationExpressionToQuery(e){let{mutationType:t,conditions:r,predicateObjects:n}=e;if(!t||!r||n&&0===n.length)return"";const a={};let o,s;if(1===r.length)o=this.termToString(r[0].subject),s=[];else{const e=r[r.length-1].predicate;o=this.createVar(e.value,a),({queryVar:o,clauses:s}=this.expressionToTriplePatterns(r,o,a))}const i=[];for(const{predicate:e,reverse:t,objects:r}of n){const n=r?r.map((e=>this.termToString(e))):[this.createVar(e.value,a)];i.push(...this.triplePatterns(o,e,n,t))}const l=`{\n  ${i.join("\n  ")}\n}`;return 0===s.length?`${t} DATA ${l}`:`${t} ${l} WHERE {\n  ${s.join("\n  ")}\n}`}expressionToTriplePatterns(e,t){let[r,...n]=e,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=n.length-1,s=[],i=[];let l=this.termToString(function(e){if("BlankNode"!==e.termType)return e;e.skolemized||(e.skolemized=(0,le.namedNode)("urn:ldflex:sk"+Ot++));return e.skolemized}(r.subject)),c=l,u=!1;return n.forEach(((e,r)=>{const n=l,{predicate:d,reverse:p,sort:f,values:h}=e;let g;if(h&&h.length>0){if(!u)throw new Error("Specifying fixed values is not allowed here");g=h.map(this.termToString),u=!1}else l=r<o?this.createVar(`v${r}`,a):t,g=[l],u=!0;s.push(...this.triplePatterns(n,d,g,p)),f?(i.push({variable:l,order:f}),l=c):c=l})),{queryVar:c,sorts:i,clauses:s}}createVar(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=0,n=`?${e.match(/[a-z0-9]*$/i)[0]||"result"}`;if(t){for(e=n;t[n];)n=`${e}_${r++}`;t[n]=!0}return n}termToString(e){let{value:t}=e;switch(vt.test(t)&&(t=t.replace(xt,Rt)),e.termType){case"NamedNode":return`<${t}>`;case"BlankNode":return`_:${t}`;case"Literal":let r="";return e.language?r=`@${e.language}`:"http://www.w3.org/2001/XMLSchema#string"!==e.datatype.value&&(r=`^^<${e.datatype.value}>`),`"${t}"${r}`;default:throw new Error(`Could not convert a term of type ${e.termType}`)}}triplePatterns(e,t,r){let n=[e];arguments.length>3&&void 0!==arguments[3]&&arguments[3]&&([n,r]=[r,n]);const a=r.join(", "),o="path"===t.termType?t.value:`<${t.value}>`;return n.map((e=>`${e} ${o} ${a}.`))}}function Rt(e){let t=_t[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}let Ot=0;class Nt{handle(e,t){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;const n=e.replace(/^(https?:\/\/[^()[\]'"]+)$/,'["$1"]').replace(/^(?=[a-z$_])/i,".").replace(/\[([^'"`\](]*)\]/g,'["$1"]'),a=`"use strict";return ldflex${n}`;let o;try{o=Function("ldflex",a)}catch({message:t}){throw new Error(`Expression "${e}" is invalid: ${t}`)}return o(r)}}}class Ct{handle(e){let{subject:t,parent:r}=e;for(;!t&&r;)({subject:t,parent:r}=r);return t?Promise.resolve(t).then((t=>e.extendPath({subject:t},null))):void 0}}class At{handle(e){return e.extendPath({distinct:!0,select:"?subject",finalClause:()=>"?subject ?predicate ?object.",property:e.property})}}class Tt{handle(e,t){let{subject:r}=e;return r?r.then&&Ce((()=>t.subject)):Ce((()=>Oe(t.results)))}}class Dt{handle(e,t){return async e=>{const r=[];if(ze(t)){"function"!=typeof e&&(e=e=>e);let n=0;for await(const a of t)r.push(await e(a,n++))}return r}}}function Lt(e,t){if("NamedNode"!==(null==e?void 0:e.termType))return;const r=e.value.lastIndexOf("#");return t(e.value,-1===r?e.value.lastIndexOf("/"):r)}const St=nt((e=>{let{subject:t}=e;return Lt(t,((e,t)=>e.slice(0,t+1)))})),Pt=nt((e=>{let{subject:t}=e;return Lt(t,((e,t)=>e.slice(t+1)))})),$t=nt((async e=>{const t=await e.settings.parsedContext,r=St.handle(e);for(const e in t)if("string"==typeof e&&t[e]===r)return e}));var jt={__esModule:()=>{},then:new Tt,[Symbol.asyncIterator]:new rt,list:ot(),container:st(!1),containerAsSet:st(!0),collection:it(),get:new dt,subject:new Ct,predicate:new ht,properties:new It,predicates:new gt,pathExpression:new ft,sparql:new bt,subjects:new At,results:new ut,sort:new mt("ASC"),sortDesc:new mt("DESC"),preload:new class{handle(e,t){var r=this;return async function(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];if(a.length>0){const n=await Promise.all(a.map((async e=>(await t[e].predicate).value)));e.resultsCache=await r.createResultsCache(n,e,t)}return t}}async createResultsCache(e,t,r){const{query:n,vars:a,resultVar:o}=await this.createQuery(e,r),{settings:{queryEngine:s}}=t,i=s.execute(n),l={},c={};for await(const r of i){const n=r.get(o),s=Et(n);if(!(s in l)){const r=c[s]={};for(const t of e)r[t]=[];const a={subject:n,propertyCache:r};l[s]=t.extendPath(a,null)}const i=c[s];for(let n=0;n<a.length;n++){const o=r.get(a[n]);if(o){const r=t.extendPath({subject:o},null);i[e[n]].push(r)}}}return Object.values(l)}async createQuery(e,t){const r=await t.sparql,n=yt.exec(r);if(!n)throw new Error(`Unexpected path query: ${r}`);const a=n[2],o=e.map(((e,t)=>`?preload_${t}`)),s=e.map(((e,t)=>`    { ${a} <${e}> ${o[t]}. }`)).join("\n    UNION\n");return{query:r.replace(yt,`$1$2 ${o.join(" ")}`).replace(wt,`  OPTIONAL {\n${s}\n  }\n$&`),vars:o,resultVar:a}}},mutationExpressions:new pt,add:new class extends ct{constructor(){super("INSERT",!1)}},set:new class extends ct{handle(e,t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];const a=Ye(r)?Object.keys(r[0]).reduce(((e,t)=>e.delete({[t]:[]})),t):t.delete();return a.add(...r)}}},replace:new class{handle(e,t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];if(!e||!n.length)throw new Error("Replacing values requires at least two arguments, old value followed by all new values");return t.delete(e).add(...n)}}},delete:new class extends ct{constructor(){super("DELETE",!0)}},termType:Vt("termType"),value:Vt("value"),datatype:Vt("datatype"),language:Vt("language"),canonical:Vt("canonical"),equals:lt.sync("subject","equals"),toString:lt.syncFunction("subject","value"),valueOf:Ut(),toPrimitive:Ut(),prefix:$t,namespace:St,fragment:Pt,toArray:new Dt,termTypes:nt(((e,t)=>t.toArray((e=>e.termType)))),values:nt(((e,t)=>t.toArray((e=>e.value)))),datatypes:nt(((e,t)=>t.toArray((e=>e.datatype)))),languages:nt(((e,t)=>t.toArray((e=>e.language)))),resolve:new Nt};function Vt(e){return nt(((t,r)=>{let{subject:n}=t;return n&&e in n?n[e]:r.then&&r.then((t=>null==t?void 0:t[e]))}))}function Ut(){return nt((e=>{let{subject:t}=e;return()=>"string"!=typeof(null==t?void 0:t.termType)?void 0:Qe(t)}))}class kt{constructor(e,t){this._settings=e={...e},this._data=t={...t};const r=e.handlers||jt;for(const e in r)r[e]=Mt(r[e]);for(const e of Object.getOwnPropertySymbols(r))r[e]=Mt(r[e]);const n=(e.resolvers||[]).map(Gt);if(e.context){const t=new _e(e.context);n.push(new tt(t)),n.push(this._jsonldResolver=new et(t)),e.parsedContext=(new(0,ee.ContextParser)).parse(e.context).then((e=>{let{contextRaw:t}=e;return t}))}else e.context=e.parsedContext={};this._pathProxy=new ie({handlers:r,resolvers:n}),delete e.handlers,delete e.resolvers}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;t||([t,e]=[e,null]),"string"==typeof t&&(t={subject:t});const r={...this._data,...t};if("string"==typeof r.subject){if(!this._jsonldResolver)throw new Error("Unable to resolve string subject - try providing a context to the PathFactory");r.subject=this._jsonldResolver.lookupProperty(r.subject)}return this._pathProxy.createPath({...this._settings,...e},r)}}function Mt(e){return"function"==typeof e.handle?e:{handle:e}}function Gt(e){return"function"==typeof e.resolve?e:{supports:Ft,resolve:e}}function Ft(){return!0}kt.defaultHandlers=jt;class qt{constructor(e){this.source=e}async*execute(e){const t=new URL(this.source);t.searchParams.set("format","application/sparql-results+json");const r=new FormData;r.set("query",e);const n=await fetch(t.toString(),{method:"POST",body:r}),a=await n.json(),{results:{bindings:o}}=a;for(const e of o)yield new Proxy(e,{get(t,r){if("get"===r)return t=>e[t]}})}}const Kt=/(SELECT\s+)(\?\S+)/,Jt=/\}[^}]*$/;class Bt{handle(e,t){var r=this;return async function(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];if(a.length>0){const n=await Promise.all(a.map((async e=>(await t[e].predicate).value)));e.resultsCache=await r.createResultsCache(n,e,t)}return t}}async createResultsCache(e,t,r){const{query:n,vars:a,resultVar:o}=await this.createQuery(e,r),{settings:{queryEngine:s}}=t,i=s.execute(n),l={},c={};for await(const r of i){const n=r.get(o.substring(1)),s=Wt(n);if(!(s in l)){const r=c[s]={};for(const t of e)r[t]=[];const a={subject:n,propertyCache:r};l[s]=t.extendPath(a,null)}const i=c[s];for(let n=0;n<a.length;n++){const o=r.get(a[n].substring(1));if(o){const r=t.extendPath({subject:o},null);i[e[n]].push(r)}}}return Object.values(l)}async createQuery(e,t){const r=await t.sparql,n=Kt.exec(r);if(!n)throw new Error(`Unexpected path query: ${r}`);const a=n[2],o=e.map(((e,t)=>`?preload_${t}`)),s=e.map(((e,t)=>`    { ${a} ${e.startsWith("http")?`<${e}>`:e} ${o[t]}. }`)).join("\n    UNION\n");return{query:r.replace(Kt,`$1$2 ${o.join(" ")}`).replace(Jt,`  OPTIONAL {\n${s}\n  }\n$&`),vars:o,resultVar:a}}}function Wt(e){const{termType:t,value:r}=e;switch(t){case"NamedNode":return r;case"Literal":const{language:n,datatype:a}=e;return`${t}|${n}|${a.value}|${r}`;default:return`${t}|${r}`}}const zt={__esModule:()=>{},then:new Tt,[Symbol.asyncIterator]:new rt,list:ot(),container:st(!1),containerAsSet:st(!0),collection:it(),get:new dt,subject:new Ct,predicate:new ht,properties:new It,predicates:new gt,pathExpression:new ft,sparql:new bt,subjects:new At,results:new ut,sort:new mt("ASC"),sortDesc:new mt("DESC"),preload:new Bt,mutationExpressions:new pt,termType:Xt("termType"),value:Xt("value"),datatype:Xt("datatype"),language:Xt("language"),canonical:Xt("canonical"),equals:lt.sync("subject","equals"),toString:lt.syncFunction("subject","value"),valueOf:Yt(),toPrimitive:Yt(),prefix:$t,namespace:St,fragment:Pt,toArray:new Dt,termTypes:nt(((e,t)=>t.toArray((e=>e.termType)))),values:nt(((e,t)=>t.toArray((e=>e.value)))),datatypes:nt(((e,t)=>t.toArray((e=>e.datatype)))),languages:nt(((e,t)=>t.toArray((e=>e.language)))),resolve:new Nt};function Xt(e){return nt(((t,r)=>{let{subject:n}=t;return n&&e in n?n[e]:r.then&&r.then((t=>null==t?void 0:t[e]))}))}function Yt(){return nt((e=>{let{subject:t}=e;return()=>"string"!=typeof(null==t?void 0:t.termType)?void 0:Qe(t)}))}const Ht={handle:(e,t)=>async e=>{const r=[],n=[];e(new Proxy({},{get:(e,t,r)=>(n.push(t),Reflect.get(e,t,r))})),await t.preload(n);for await(const n of t)r.push(e(n));return r}},Qt={...zt,parent:new class{handle(e){let t=e;for(;t.parent;)t=t.parent;return t}},path:new class{handle(e){return e}},preload:new Bt,map:Ht},Zt=(e,t,r,n,a={})=>{n||(n=e);const o=new qt(n),s={"@context":{...t}};r&&(s["@context"]["@vocab"]=t[r]);return new kt({queryEngine:o,handlers:{...Qt,...a},context:s},void 0).create({subject:{termType:"NamedNode",value:e}})},er=(e,t)=>E(((e,r,n)=>{t.then((()=>{n.value.then((t=>{"string"==typeof t&&e.setAttribute(r,t)}))}))}),e),tr=e=>{const t=new(0,ee.JsonLdContextNormalized)(e.prefixes);for(const[r,n]of Object.entries(e.dataHandlers)){const a=t.expandTerm(r);a!==r&&(e.dataHandlers[a]=n)}return{html:function(t,...r){const n=r.filter((e=>"function"==typeof e?.extendPath)),a=n.length?oe(n):Promise.resolve();return r=r.map(((r,n)=>t[n].trim().endsWith("=")&&"function"==typeof r?.extendPath?er(r,a):rr(e,r,a))),Z(t,...r)},render:Q,Hole:X,get:(t,r="foaf",n=null)=>Zt(t,e.prefixes,r,n,e.extraLDflexHandlers)}},rr=(e,t,r)=>{const n="function"==typeof t?.extendPath,a=t instanceof Promise;return n||a?o=>{const s=o.parentNode;if(s&&s instanceof HTMLElement){if(Q(s,ne.get(t)??e.loader()),a&&!n)return t.then((e=>Q(s,Z`${e}`)));if(n)return r.then((()=>t.then((async t=>{const r=await(t?.datatype?.id)??"iri",n=await(t?.value);if(!n)return s.innerHTML="";if(!e.dataHandlers[r])throw new Error("Missing data handler: "+r);return Q(s,e.dataHandlers[r](n))})))).catch((t=>{Q(s,e.error(t))}))}}:t};const{html:nr,render:ar,Hole:or,get:sr}=tr({loader:()=>nr`<span class="loader">Loading...</span>`,error:e=>nr``,prefixes:{schema:"https://schema.org/",foaf:"http://xmlns.com/foaf/0.1/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",dbo:"http://dbpedia.org/ontology/",dbr:"http://dbpedia.org/resource/",dbp:"http://dbpedia.org/property/",rdfs:"http://www.w3.org/2000/01/rdf-schema#",friends:"knows",label:"http://www.w3.org/2000/01/rdf-schema#label"},dataHandlers:{"rdf:langString":e=>e,"xsd:string":e=>e,"xsd:date":e=>new Date(e).toLocaleString("nl",{dateStyle:"short"}),iri:e=>e.includes("mailto:")?nr`<a href=${e}>${e.replace("mailto:","")}</a>`:e}}),ir=e=>nr`<span class="lorem">${"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis a feugiat turpis. Nam bibendum sed nibh et vestibulum. Praesent nibh neque, imperdiet in eleifend vitae, auctor in erat. Vestibulum fermentum consectetur urna, id lacinia neque facilisis sollicitudin. Aenean quis purus tellus. Nunc risus leo, suscipit quis massa nec, hendrerit congue justo.".substring(0,e)}</span>`,lr=e=>sr(e,"dbo","https://dbpedia.org/sparql"),cr=["Søren_Kierkegaard","Friedrich_Nietzsche","Immanuel_Kant","Plato","Marcus_Aurelius"].map((e=>{const t=`http://dbpedia.org/resource/${e}`;return[lr(t),t,e]}));ar(document.body,nr`
    <div class="container pt-5">
    <h1>A demonstration of <a target="_blank" href="https://github.com/danielbeeke/uhtml-ldflex">uHTML-LDflex</a></h1>

    <p>
      What are you seeing <a target="_blank" href="https://github.com/danielbeeke/uhtml-ldflex/blob/master/demo/demo.ts">here</a>?

      <ul>
      <li>uHTML templating engine, that automatically resolves LDflex paths via type specific handlers.</li>
      <li>Multiple calls inside a template are bundled into one query via the preload function of LDflex.</li>
      <li>The query bundling also works for .map(). A custom LDflex handler is written for that use case.</li>
      <li>Promises first show a preloader and then are shown.</li>
      <li>Dont mind the different languages, the demonstration is here to show fetching.</li>
      </ul>
    </p>

    <div class="row row-cols-1 row-cols-md-5 g-4">
      ${cr.map((([e,t])=>nr`
      <div class="col">
        <div class="card">
          <img onload=${e=>e.target.classList.add("loaded")} src=${e.thumbnail} class="card-img-top" alt=" ">
          <div class="card-body">
            <h5 class="card-title">
              <span>${ae(e.label,ir(20))}</span>
            </h5>
            <span>${ae(e.deathYear,ir(4))}</span>

            <p class="card-text truncate">${ae(e.rdfs_comment,ir(1e3))}</p>
          </div>

          <ul class="list-group list-group-flush" style="border-top: none;">
            <li class="list-group-item"><em class="text-muted">Works:</em></li>
          </ul>

          <ul class="list-group list-group-flush" style="max-height: 200px; border-top: none; overflow-y: scroll;">
            <li class="list-group-item"><em class="text-muted">Works:</em></li>

            ${e["^dbo:author"].map((e=>nr`
              <li class="list-group-item">
                <span>${e.label}</span>
              </li>`))}
          </ul>

          <div class="card-footer">
            <a href=${t} target="_blank" class="btn btn-primary">Read more</a>
          </div>      

        </div>
      </div>
      `))}
    </div>

  </div>
  `);
//# sourceMappingURL=index.e861e5c9.js.map
